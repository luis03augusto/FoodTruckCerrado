@model IList<FoodTruckCerrado.Models.FoodTruck>

<main class="evento-section">
    <section>

        <h2>@ViewBag.evento.Nome</h2>

        <div class="box-evento-pai">

            <div class="descricao-evento">
                <p class="data-evento">@ViewBag.evento.Data.Date.ToString("dd/MM/yyyy")</p>
                <p class="cidade-evento">Cidade: @ViewBag.evento.Cidade</p>
                <h4 class="text-center">Saiba mais sobre nosso evento</h4>
                <p>@ViewBag.evento.Descricao</p>
            </div>

            <div class="foto-capa-evento">
                <img src="@ViewBag.evento.FotoCapa" />
            </div>
         </div>
    </section>

    <section>

        <h2>Localização</h2>

        <div>
            @if (ViewBag.loca != null)
            {
                <div class="mapa-evento">
                    <input type="hidden" id="lat" value="@ViewBag.loca.Latitude" />
                    <input type="hidden" id="long" value="@ViewBag.loca.Logitude" />
                    <input type="hidden" id="Nome" value="@ViewBag.evento.Nome" />

                    <div id="map">
                        
                    </div>
                    <br />
                    <p><input class="btn btn-primary" type="button" id="rota" value="Traçar rota" />
                        @if (WebSecurity.IsAuthenticated && Roles.IsUserInRole(WebSecurity.CurrentUserName, "admin"))
                        {
                            @Html.ActionLink("Editar", "Atualiza", "LocalizacaoEvento", new { idEvento = ViewBag.evento.Id }, new { @class = "btn btn-primary" })
                            @Html.ActionLink("Deletar localização", "Deleta", "LocalizacaoEvento", new { idEvento = ViewBag.evento.Id }, new { @class = "btn btn-danger" })
                        }</p>  
                </div>
            }
            else
            {
                <div class="sem-localizacai-evento">
                    <p>Não há localização cadastrada para esse evento !</p>
                @if (WebSecurity.IsAuthenticated && Roles.IsUserInRole(WebSecurity.CurrentUserName, "admin"))
                {
                    @Html.ActionLink("Add localização", "Form", "LocalizacaoEvento", new { idEvento = ViewBag.evento.Id }, new { @class = "btn btn-primary" })
                }
                </div>
            }
        </div>

    </section>

    <section>

        <h2>Food Trucks participantes</h2>

        @if (Model.Count() != 0)
        {
            <div class="food-truck-eventos">
                @foreach (var food in Model)
                {
                    <figure class="thumbnail img-thumbnail">

                        <img src="@food.FotoCapa" />

                        <figcaption>
                            @Html.ActionLink(@food.Nome, "Visualiza", "FoodTruck", new { id = food.Id }, null)
                        </figcaption>
                    </figure>
                }
            </div>
        }
        else
        {
            <div class="sem-localizacai-evento">
                Não há Food Truck cadastrados nesse evento !
            </div>
        }

    </section>

    <section>

        <h2>Fotos</h2>

            @if (Enumerable.Count(ViewBag.Fotos) >= 3)
            {
                <section class="carrosel-todo">

                    <div id="carousel-example-generic" class="tamanho-carrosel carousel slide" data-ride="carousel">
                        <!-- Indicators -->
                        <ol class="carousel-indicators">
                            <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                            <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                            <li data-target="#carousel-example-generic" data-slide-to="2"></li>
                        </ol>

                        <!-- Wrapper for slides -->
                        <div class="carousel-inner" role="listbox">
                            <div class="item active imagen-carrosel">
                                <img src="@ViewBag.Fotos[0].Url" alt="...">
                                <div class="carousel-caption">
                                </div>
                            </div>
                            <div class="item imagen-carrosel">
                                <img src="@ViewBag.Fotos[1].Url" alt="...">
                                <div class="carousel-caption">
                                </div>
                            </div>
                            <div class="item imagen-carrosel">
                                <img src="@ViewBag.Fotos[2].Url" alt="...">
                                <div class="carousel-caption">
                                </div>
                            </div>
                        </div>

                        <!-- Controls -->
                        <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
                            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
                            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                    <div class="link-mais-fotos">
                        @Html.ActionLink("Veja Mais Fotos ", "Index", "FotoEvento", new { idEvento = ViewBag.evento.Id }, null)
                    </div>
                </section>
            }
            else if (Enumerable.Count(ViewBag.Fotos) <= 2 && Enumerable.Count(ViewBag.Fotos) > 0)
            {
                <section class="carrosel-todo">
                    <div class="tamanho-carrosel">
                        <div class="imagen-carrosel">
                            <img src="@ViewBag.Fotos[0].Url" alt="...">
                        </div>
                    </div>
                    <div class="link-mais-fotos">
                        @Html.ActionLink("Veja Mais Fotos ", "Index", "FotoEvento", new { idEvento = ViewBag.evento.Id }, null)
                    </div>
                </section>
            }
            else
            {
                <section class="carrosel-todo">
                    <div class="tamanho-carrosel">
                        <div class="imagen-carrosel">
                            <img src="http://www.integracao875.com.br/site/fotos/16122010/zoom/00.jpg" alt="...">
                        </div>
                    </div>
                    <div class="link-mais-fotos">
                        @Html.ActionLink("Veja Mais Fotos ", "Index", "FotoEvento", new { idEvento = ViewBag.evento.Id }, null)
                    </div>
                </section>
            }

    </section>
</main>
<script src="~/Scripts/Mapas.js"></script>
